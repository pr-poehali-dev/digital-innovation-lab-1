import { Navbar } from "@/components/navbar"
import { Footer } from "@/components/footer"
import { Badge } from "@/components/ui/badge"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from "@/components/ui/accordion"

const articles = [
  {
    id: "markets",
    badge: "Глава 1",
    title: "Что такое финансовые рынки",
    summary: "Финансовые рынки — это площадки, где покупатели и продавцы обменивают активы: акции, валюту, криптовалюту, товары. Понимание структуры рынка — фундамент любой торговли.",
    sections: [
      {
        title: "Основные типы рынков",
        content: "Фондовый рынок — торговля акциями компаний (Мосбиржа, NYSE, NASDAQ). Криптовалютный — Bitcoin, Ethereum и тысячи альткоинов (Binance, Bybit). Форекс — валютные пары (EUR/USD, USD/RUB). Товарный — нефть, золото, пшеница. Каждый рынок имеет свои особенности ликвидности, волатильности и торговых часов."
      },
      {
        title: "Участники рынка",
        content: "Маркет-мейкеры обеспечивают ликвидность, выставляя заявки на покупку и продажу. Институциональные трейдеры (банки, хедж-фонды) двигают крупные объёмы. Розничные трейдеры — частные лица с небольшим капиталом. Алгоритмы и боты автоматически исполняют стратегии. Понимание мотивов каждого участника помогает читать рынок."
      },
      {
        title: "Стакан ордеров (Order Book)",
        content: "Стакан — список активных заявок на покупку (биды) и продажу (аски). Лучший бид — максимальная цена покупки, лучший аск — минимальная цена продажи. Разница между ними — спред. Большой объём заявок на одном уровне — потенциальная поддержка или сопротивление."
      },
    ]
  },
  {
    id: "orders",
    badge: "Глава 2",
    title: "Типы ордеров и исполнение сделок",
    summary: "Правильный выбор типа ордера влияет на цену входа, исполнение и итоговый результат. Разберём все основные типы и когда их применять.",
    sections: [
      {
        title: "Рыночный ордер (Market Order)",
        content: "Исполняется немедленно по текущей лучшей цене. Плюс — гарантированное исполнение. Минус — при низкой ликвидности цена может сильно отличаться от ожидаемой (проскальзывание/slippage). Используйте для входа в высоколиквидные активы, когда важна скорость."
      },
      {
        title: "Лимитный ордер (Limit Order)",
        content: "Исполняется только по указанной цене или лучше. Плюс — контроль цены входа, нет проскальзывания. Минус — может не исполниться, если цена не достигнет уровня. Идеален для входа на откатах и выхода на целевых уровнях."
      },
      {
        title: "Стоп-ордера и стоп-лимит",
        content: "Stop-Loss (SL) — закрывает убыточную позицию при достижении цены. Take-Profit (TP) — фиксирует прибыль. Стоп-лимит сначала активирует стоп, затем выставляет лимитный ордер — точнее, но может не исполниться при гэпе. Трейлинг-стоп автоматически передвигается вслед за ценой, сохраняя прибыль."
      },
    ]
  },
  {
    id: "analysis",
    badge: "Глава 3",
    title: "Технический анализ: основы чтения графиков",
    summary: "Технический анализ — изучение исторических данных о цене и объёме для прогнозирования будущих движений. Используется большинством трейдеров во всех рынках.",
    sections: [
      {
        title: "Тайм-фреймы и их выбор",
        content: "Тайм-фрейм — период, который отображает одна свеча: M1 (1 минута), M15, H1, H4, D1, W1. Долгосрочный тренд определяется на старших ТФ (D1, W1). Точка входа ищется на младших (H1, M15). Скальперы работают на M1–M5, свинг-трейдеры — на H4–D1."
      },
      {
        title: "Японские свечи",
        content: "Каждая свеча показывает: открытие, максимум, минимум, закрытие (OHLC). Тело свечи — разница открытия и закрытия. Тени — выходы цены за пределы тела. Ключевые паттерны: доджи (нерешительность), молот (разворот вниз → вверх), поглощение (смена настроений), утренняя/вечерняя звезда. Паттерны надёжны только с подтверждением объёма."
      },
      {
        title: "Уровни поддержки и сопротивления",
        content: "Поддержка — уровень, где покупатели многократно останавливали падение. Сопротивление — где продавцы тормозили рост. Пробитый уровень меняет роль: поддержка становится сопротивлением и наоборот. Чем больше касаний уровня — тем он значимее. Психологические уровни (круглые числа) часто совпадают с техническими."
      },
    ]
  },
  {
    id: "indicators",
    badge: "Глава 4",
    title: "Индикаторы: как использовать без перегрузки",
    summary: "Индикаторы помогают подтверждать сигналы, но не заменяют понимание рынка. Важно использовать минимальный набор и понимать логику каждого.",
    sections: [
      {
        title: "Скользящие средние (MA)",
        content: "SMA (простая) и EMA (экспоненциальная — реагирует быстрее) сглаживают ценовой шум. Пересечение быстрой MA над медленной — сигнал на покупку (golden cross). Пересечение снизу вверх — продажу (death cross). MA 200 на D1 — классический маркер долгосрочного тренда. Цена выше MA200 = бычий рынок."
      },
      {
        title: "RSI — индекс относительной силы",
        content: "RSI от 0 до 100. Выше 70 — зона перекупленности (возможен откат). Ниже 30 — перепроданность (возможен отскок). Но в сильном тренде RSI может долго оставаться в экстремальной зоне. Дивергенция RSI (цена обновляет максимум, RSI — нет) — сильный сигнал разворота."
      },
      {
        title: "MACD и объём",
        content: "MACD = разница двух EMA + сигнальная линия + гистограмма. Пересечение MACD выше сигнальной — покупка, ниже — продажа. Объём подтверждает движение: рост цены с увеличением объёма — сильный сигнал. Рост на падающем объёме — слабый, возможный ложный пробой."
      },
    ]
  },
  {
    id: "riskmanagement",
    badge: "Глава 5",
    title: "Риск-менеджмент: как не слить депозит",
    summary: "Риск-менеджмент важнее любой стратегии. Даже прибыльная система не спасёт, если неправильно управлять размером позиций.",
    sections: [
      {
        title: "Правило 1–2% на сделку",
        content: "Классическое правило: рискуйте не более 1–2% депозита в одной сделке. При депозите 100,000₽ максимальный убыток за сделку — 1,000–2,000₽. Это позволяет пережить серию из 20–30 убыточных сделок подряд без критического урона. Профессионалы часто используют ещё меньший риск — 0.5%."
      },
      {
        title: "Соотношение риск/прибыль (R:R)",
        content: "Минимально допустимое R:R = 1:2 (рискуете 1, зарабатываете 2). При R:R 1:2 достаточно выигрывать всего 34% сделок чтобы быть в плюсе. При R:R 1:3 достаточно 25% прибыльных сделок. Не входите в сделку, если потенциальная прибыль меньше чем 2x риска."
      },
      {
        title: "Торговый журнал",
        content: "Записывайте каждую сделку: актив, дата, направление, причина входа, результат, ошибки. Анализируйте через 50–100 сделок: какие активы приносят прибыль, в какое время лучшие результаты, какие ошибки повторяются. Журнал — главный инструмент роста трейдера. Без него улучшение невозможно."
      },
    ]
  },
]

export default function TradingBasics() {
  return (
    <div className="dark min-h-screen bg-black">
      <Navbar />
      <main className="pt-24 pb-20">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
          {/* Header */}
          <div className="text-center mb-16">
            <Badge className="bg-red-500/20 text-red-400 border-red-500/30 mb-4">База знаний</Badge>
            <h1 className="font-orbitron text-4xl md:text-5xl font-bold text-white mb-6">
              Основы трейдинга
            </h1>
            <p className="text-gray-300 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed">
              Полный учебный курс от нуля до первой осознанной сделки. Читайте главы по порядку или выбирайте нужную тему.
            </p>
          </div>

          {/* Progress bar */}
          <div className="flex gap-2 mb-12 flex-wrap justify-center">
            {articles.map((a) => (
              <a
                key={a.id}
                href={`#${a.id}`}
                className="text-xs font-space-mono text-red-400 border border-red-500/30 px-3 py-1 rounded-full hover:bg-red-500/10 transition-colors"
              >
                {a.badge}
              </a>
            ))}
          </div>

          {/* Articles */}
          <div className="space-y-12">
            {articles.map((article) => (
              <div key={article.id} id={article.id} className="scroll-mt-24">
                <Card className="bg-zinc-900 border-red-500/20">
                  <CardHeader className="pb-4">
                    <div className="flex items-center gap-3 mb-3">
                      <Badge className="bg-red-500 text-white border-0">{article.badge}</Badge>
                    </div>
                    <CardTitle className="font-orbitron text-2xl text-white leading-tight">
                      {article.title}
                    </CardTitle>
                    <p className="text-gray-400 leading-relaxed mt-2">{article.summary}</p>
                  </CardHeader>
                  <CardContent>
                    <Accordion type="multiple" className="w-full">
                      {article.sections.map((section, idx) => (
                        <AccordionItem
                          key={idx}
                          value={`${article.id}-${idx}`}
                          className="border-red-500/20"
                        >
                          <AccordionTrigger className="text-left text-base font-semibold text-white hover:text-red-400 font-orbitron">
                            {section.title}
                          </AccordionTrigger>
                          <AccordionContent className="text-gray-300 leading-relaxed font-space-mono text-sm">
                            {section.content}
                          </AccordionContent>
                        </AccordionItem>
                      ))}
                    </Accordion>
                  </CardContent>
                </Card>
              </div>
            ))}
          </div>

          {/* Next step */}
          <div className="mt-16 text-center">
            <p className="text-gray-400 mb-4 font-space-mono">Следующий шаг — автоматизация торговли</p>
            <a
              href="/bots-guide"
              className="inline-block bg-red-500 hover:bg-red-600 text-white font-orbitron px-8 py-3 rounded-md transition-colors"
            >
              Гайд по торговым ботам →
            </a>
          </div>
        </div>
      </main>
      <Footer />
    </div>
  )
}
